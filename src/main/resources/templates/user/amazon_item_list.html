<!DOCTYPE html>

<html lang="ja" dir="ltr" xmlns:th="http://www.thymeleaf.org"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

  <head>
    <meta charset="utf-8">
    <title>検索結果</title>
    <link rel="stylesheet" th:href="@{/css/user.css}"type="text/css"></link>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" >
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" >
  </head>

  <body>
  <div class="full-page">

    <!-- ====テンプレート読み込み==== -->
    <div th:insert="user/navbar::template"></div>

    <h3>検索結果</h3>
    <div class="amazon">
      <p class="error-message"th:text="${message}"></p>

      <!-- 検索結果 -->
       <form th:action="@{/amazon_item_list}" method="post">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">ASIN</th>
            <th scope="col">商品名</th>
            <th scope="col">カテゴリ</th>
            <th scope="col">ランク</th>
            <th scope="col">価格</th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="item,stat:${itemList}">
            <td>
              <a th:href="@{'/item_detail/'+${item.asin}}"th:text="${item.asin}"></a>
               <input type="hidden"th:value="${item.asin}"name="itemList"th:name="'itemList['+${stat.index}+'].asin'">
            </td>
            <td>
              <p th:text="${item.title}"></p>
              <input type="hidden"th:value="${item.title}"name="itemList"th:name="'itemList['+${stat.index}+'].title'">
            </td>
            <td>
              <p th:text="${item.category}"></p>
              <input type="hidden"th:value="${item.category}"name="itemList"th:name="'itemList['+${stat.index}+'].category'">
            </td>
            <td>
              <p th:text="${item.rank}"></p>
              <input type="hidden"th:value="${item.rank}"name="itemList"th:name="'itemList['+${stat.index}+'].rank'">
            </td>
            <td>
              <p th:text="${item.price}"></p>
              <input type="hidden"th:value="${item.price}"name="itemList"th:name="'itemList['+${stat.index}+'].price'">
            </td>
          </tr>
        </tbody>
      </table>


        <button type="submit" class="btn btn--orange">出品する</button>
      </form>

      <!-- Optional JavaScript -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS-->
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" ></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" ></script>

    </div>
    </div>
  </body>
</html>